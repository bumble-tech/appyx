plugins {
    id 'com.android.library'
    id 'kotlin-android'
    id 'kotlin-parcelize'
}

apply from: '../gradle/publication.gradle'

android {
    namespace = 'com.bumble.appyx.core'
    compileSdk 32

    defaultConfig {
        minSdk 21
        targetSdk 32

        testInstrumentationRunner 'androidx.test.runner.AndroidJUnitRunner'
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    kotlinOptions {
        jvmTarget = JavaVersion.VERSION_1_8
        useIR = true
    }
    buildFeatures {
        compose true
    }
    composeOptions {
        kotlinCompilerExtensionVersion libs.versions.compose.get()
    }
    lintOptions {
        abortOnError false
    }
    testOptions {
        unitTests.all {
            // interface method default implementation
            exclude '**/*$DefaultImpls.class'
        }
    }
}

dependencies {
    api libs.appTreeUtils
    api libs.kotlin.coroutines.android
    api libs.androidx.lifecycle.common
    api libs.compose.animation.core
    api libs.compose.runtime

    implementation libs.androidx.activity.compose
    implementation libs.androidx.core
    implementation libs.androidx.appcompat
    implementation libs.androidx.lifecycle.java8
    implementation libs.androidx.lifecycle.runtime
    implementation libs.compose.foundation.layout
    implementation libs.compose.foundation

    testImplementation libs.androidx.arch.core.testing
    testImplementation libs.junit
    testImplementation libs.kotlin.coroutines.test

    androidTestImplementation libs.androidx.test.espresso.core
    androidTestImplementation libs.androidx.test.junit
    androidTestImplementation libs.compose.ui.test.junit4
}
